# æ¶æ„å†³ç­–è®°å½• (ADR)

> Architecture Decision Records - è®°å½• optima-bi çš„å…³é”®æŠ€æœ¯å†³ç­–

## ğŸ“š å†³ç­–ç´¢å¼•

| ADR | æ ‡é¢˜ | çŠ¶æ€ | æ—¥æœŸ |
|-----|------|------|------|
| [ADR-001](./adr-001-typescript-stack.md) | é€‰æ‹© TypeScript è€Œé Python | âœ… å·²é‡‡çº³ | 2025-01-21 |
| [ADR-002](./adr-002-direct-db-access.md) | ç›´æ¥æ•°æ®åº“è®¿é—®è€Œé API è°ƒç”¨ | âš ï¸ éœ€æ”¹è¿› | 2025-01-21 |
| [ADR-003](./adr-003-oauth-device-flow.md) | OAuth 2.0 Device Flow è®¤è¯ | âœ… å·²é‡‡çº³ | 2025-01-21 |
| [ADR-004](./adr-004-json-output.md) | JSON é»˜è®¤è¾“å‡º + Pretty é€‰é¡¹ | âœ… å·²é‡‡çº³ | 2025-01-21 |
| [ADR-005](./adr-005-multi-env.md) | å¤šç¯å¢ƒæ”¯æŒ | âœ… å·²é‡‡çº³ | 2025-01-21 |
| [ADR-006](./adr-006-clickhouse-olap.md) | ClickHouse + CDC å®æ—¶åŒæ­¥ | ğŸ”´ å¿…é¡»é‡‡çº³ | 2025-01-21 |
| [ADR-007](./adr-007-web-dashboard.md) | Web å¯è§†åŒ–ç•Œé¢ï¼ˆDashboardï¼‰ | âœ… å·²é‡‡çº³ | 2025-01-21 |
| [ADR-008](./adr-008-row-level-security.md) | æ•°æ®æƒé™éš”ç¦»ï¼ˆRow-Level Securityï¼‰ | âœ… å·²é‡‡çº³ | 2025-01-21 |

## ğŸ“– å¦‚ä½•é˜…è¯» ADR

æ¯ä¸ª ADR åŒ…å«ä»¥ä¸‹éƒ¨åˆ†ï¼š
- **çŠ¶æ€**: æè®®/å·²é‡‡çº³/å·²å¼ƒç”¨/è¢«å–ä»£
- **èƒŒæ™¯**: ä¸ºä»€ä¹ˆéœ€è¦åšè¿™ä¸ªå†³ç­–
- **å†³ç­–**: æˆ‘ä»¬é€‰æ‹©äº†ä»€ä¹ˆæ–¹æ¡ˆ
- **ç†ç”±**: ä¸ºä»€ä¹ˆé€‰æ‹©è¿™ä¸ªæ–¹æ¡ˆ
- **æ›¿ä»£æ–¹æ¡ˆ**: æˆ‘ä»¬è€ƒè™‘è¿‡ä½†æ”¾å¼ƒçš„æ–¹æ¡ˆ
- **å½±å“**: è¿™ä¸ªå†³ç­–çš„åæœå’Œå½±å“
- **ç›¸å…³å†³ç­–**: ä¸å…¶ä»– ADR çš„å…³ç³»

## ğŸ¯ å¿«é€Ÿå¯¼èˆª

### å·²é‡‡çº³çš„å…³é”®å†³ç­–
- **æŠ€æœ¯æ ˆ**: TypeScript + Fastify + ClickHouse ([ADR-001](./adr-001-typescript-stack.md))
- **OLAP æ¶æ„**: ClickHouse + CDC å®æ—¶åŒæ­¥ ([ADR-006](./adr-006-clickhouse-olap.md))
- **è®¤è¯æ–¹å¼**: OAuth 2.0 Device Flow ([ADR-003](./adr-003-oauth-device-flow.md))
- **æƒé™éš”ç¦»**: åº”ç”¨å±‚æƒé™è¿‡æ»¤ ([ADR-008](./adr-008-row-level-security.md))
- **è¾“å‡ºæ ¼å¼**: JSON é»˜è®¤ + Pretty é€‰é¡¹ ([ADR-004](./adr-004-json-output.md))
- **å¯è§†åŒ–ç•Œé¢**: Web Dashboard (Next.js 14 + Vercel) ([ADR-007](./adr-007-web-dashboard.md))

### éœ€è¦æ”¹è¿›çš„å†³ç­–
- **æ•°æ®è®¿é—®**: ç›´æ¥è®¿é—® OLTP æ•°æ®åº“å­˜åœ¨æ€§èƒ½é£é™© ([ADR-002](./adr-002-direct-db-access.md))
  - **æ”¹è¿›æ–¹æ¡ˆ**: å¼•å…¥ ClickHouse OLAP + CDC å®æ—¶åŒæ­¥ ([ADR-006](./adr-006-clickhouse-olap.md))

### å¾…è®¨è®ºçš„å†³ç­–
- ClickHouse é›†ç¾¤åŒ–æ—¶æœºï¼ˆå•èŠ‚ç‚¹ â†’ å¤šèŠ‚ç‚¹ï¼‰
- Web Dashboard ç§»åŠ¨ç«¯ Appï¼ˆPWA vs React Nativeï¼‰

### å·²æ˜ç¡®ä¸åšçš„åŠŸèƒ½ï¼ˆMVP é˜¶æ®µï¼‰
- âŒ æ•°æ®ä¿ç•™å’Œå½’æ¡£ç­–ç•¥ï¼ˆæš‚æ—¶ä¿ç•™å…¨éƒ¨æ•°æ®ï¼‰
- âŒ ç›‘æ§å’Œå‘Šè­¦ç³»ç»Ÿï¼ˆå…ˆç”¨åŸºç¡€æ—¥å¿—ï¼‰

---

**ç»´æŠ¤è€…**: Optima BI Team
**æœ€åæ›´æ–°**: 2025-01-21
